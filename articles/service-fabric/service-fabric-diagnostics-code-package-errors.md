---
title: Azure Service Fabric diagnose code package errors | Microsoft Docs
description: Learn how to troubleshoot common code package errors with Azure Service Fabric
services: service-fabric
documentationcenter: .net
author: grzuber
manager: gkhanna
editor: ''

ms.assetid:
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/09/2019
ms.author: grzuber

---

# Diagnose common code package errors with Service Fabric

This article illustrates what it means for a code package to terminate unexpectedly, and provides insight into possible causes of common error codes as well as troubleshooting steps that may potentially mitigate the issue.

## When does a process or container terminate unexpectedly?

When Service Fabric receives a request to start a code package, it begins preparing the environment on the local system based on the configuration options set in the App and Service Manifests. These preparations may include reserving network endpoints or resources, configuring firewall rules, or setting up resource governance constraints. Once the environment has been configured properly, Service Fabric attempts to bring up the code package. This step is considered successful if the OS or container runtime reports that the process or container has been activated successfully. If activation was unsuccessful, you should see a health message in SFX that says

```
There was an error during CodePackage activation. Service host failed to activate. Error: 0xXXXXXXXX
```

Once the code package has been successfully brought up, Service Fabric begins monitoring its lifetime. At this point, a process or container can terminate at any time for a number of reasons. It could have failed to initialize a DLL, the OS could have run out of desktop heap space, etc. If your code package terminated, you should see a health message in SFX that says

```
The process/container terminated with exit code: XXXXXXXX. Please look at your application logs/dump or debug your code package for more details. For information about common termination errors, please visit https://aka.ms/service-fabric-termination-errors
```

The exit code provided in this health message is the only clue provided by the process/container as to why it terminated, and it could have been generated by any level of the stack. It's difficult to understand if this exit code was related, for example, to an OS error, a .NET issue, or was raised by your code. As a result, this article can be used as a starting point for diagnosing the source of termination exit codes and possible solutions, bearing in mind that these are general solutions to common scenarios and may not apply to the error you're seeing.

## How can I tell if Service Fabric terminated my code package?

Service Fabric might be responsible for terminating your code package for a variety of reasons. For example, it may decide to place the code package on another node for load-balancing purposes. You can tell if your code package was terminated by Service Fabric if you see any of the exit codes in the following table:

>[!NOTE]
> If your process/container terminates with an exit code other than ones in the following table, Service Fabric is not responsible for terminating it.

Exit Code | Description
--------- | -----------
7147 | These error codes indicate that Service Fabric gracefully shut down the process/container by sending it a Ctrl+C signal.
7148 | These error codes indicate that Service Fabric terminated the process/container. Sometimes, this error code can indicate that the process/container didn't respond in a timely manner after sending a Ctrl+C signal, so it had to be killed.


## Other common error codes and their potential fixes

Exit Code | Hex Value | Short Description | Root Cause | Potential Fix
--------- | --------- | ----------------- | ---------- | -------------
3221225794 | 0xc0000142 | STATUS_DLL_INIT_FAILED | This error can potentially mean that the machine has run out of desktop heap space. This cause is especially likely if you have a large number of processes belonging to your application running on the node. | If your program wasn't built to respond to Ctrl+C signals, you can enable the "EnableActivateNoWindow" setting in the Cluster Manifest. Enabling this setting would mean your code package would run without a GUI window and would not receive Ctrl+C signals, but would reduce the amount of desktop heap space each process consumes. If your code package needs to receive Ctrl+C signals, then you can increase the size of your node's desktop heap.
3762504530 | 0xe0434352 | N/A | This value is the error code for an unhandled exception from managed code (that is, .NET). | If you're seeing this exit code, it implies that your application raised an exception that remained unhandled and terminated the process. Debugging your application's logs and dumps should be the first step to determining what caused the error.

## Next steps

* Learn more about [diagnosing other common scenarios](service-fabric-diagnostics-common-scenarios.md)
* Get a more detailed overview of Azure Monitor logs and what it offers by reading [What is Azure Monitor logs?](../operations-management-suite/operations-management-suite-overview.md)
* Learn more about Azure Monitor logs [alerting](../log-analytics/log-analytics-alerts.md) to aid in detection and diagnostics.
* Get familiarized with the [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Azure Monitor logs
