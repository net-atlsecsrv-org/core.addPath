---
title: Support for Hyper-V assessment/migration in Azure Migrate
description: Learn about support for Hyper-V assessment/migration with Azure Migrate.
author: rayne-wiselman
manager: carmonm
ms.service: azure-migrate
ms.topic: conceptual
ms.date: 11/19/2019
ms.author: raynew
---

# Support matrix for Hyper-V assessment and migration

You can use the [Azure Migrate service](migrate-overview.md) to assess and migrate machines to the Microsoft Azure cloud. This article summarizes support settings and limitations for assessing and migrating on-premises Hyper-V VMs.



## Hyper-V scenarios

The table summarizes supported scenarios for Hyper-V VMs.

**Deployment** | **Details***
--- | ---
**Assess on-premises Hyper-V VMs** | [Set up](tutorial-prepare-hyper-v.md) your first assessment.<br/><br/> [Run](scale-hyper-v-assessment.md) a large-scale assessment.
**Migrate Hyper-V VMs to Azure** | [Try out](tutorial-migrate-hyper-v.md) migration to Azure.

## Azure Migrate projects

**Support** | **Details**
--- | ---
Azure permissions | You need Contributor or Owner permissions in the subscription to create an Azure Migrate project.
Hyper-V VMs | Assess up to 35,000 Hyper-V VMs in a single project. You can have multiple projects in an Azure subscription. A project can include both VMware VMs and Hyper-V VMs, up to the assessment limits.
Geography | [Review](migrate-support-matrix.md#supported-geographies) supported geographies.


## Assessment-Hyper-V host requirements

| **Support**                | **Details**               
| :-------------------       | :------------------- |
| **Host deployment**       | The Hyper-V host can be standalone or deployed in a cluster. |
| **Permissions**           | You need administrator permissions on the Hyper-V host. <br/> Alternatively, if you don't want to assign Administrator permissions, create a local or domain user account and add the user to these groups- Remote Management Users, Hyper-V Administrators and Performance Monitor Users. |
| **Host operating system** | Windows Server 2019, Windows Server 2016 or Windows Server 2012 R2.<br/> You can't assess VMs located on Hyper-V hosts running Windows Server 2012. |
| **PowerShell Remoting**   | Must be enabled on each host. |
| **Hyper-V Replica**       | If you use Hyper-V Replica (or you have multiple VMs with the same VM identifiers), and discover both the original and replicated VMs using Azure Migrate, the assessment generated by Azure Migrate might not be accurate. |


## Assessment-Hyper-V VM requirements

| **Support**                  | **Details**               
| :----------------------------- | :------------------- |
| **Operating system** | All [Windows](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros) operating systems that are supported by Azure. |
| **Integration Services**       | [Hyper-V Integration Services](https://docs.microsoft.com/virtualization/hyper-v-on-windows/reference/integration-services) must be running on VMs that you assess, in order to capture operating system information. |



## Assessment-appliance requirements

For assessment, Azure Migrate runs a lightweight appliance to discover Hyper-V VMs, and send VM metadata and performance data to Azure Migrate. The appliance runs on a Hyper-V VM, and you set up using a compressed Hyper-V VHD that you download from the Azure portal. The following table summarizes the appliance requirements.

| **Support**                | **Details**               
| :-------------------       | :------------------- |
| **Appliance deployment**   |  You deploy the appliance as a Hyper-V VM.<br/> The appliance VM provided by Azure Migrate is Hyper-V VM version 5.0.<br/> The Hyper-V host must be running Windows Server 2012 R2 or later.<br/> The host needs sufficient space to allocate 16 GB RAM, 8 vCPUs, around 80 GB of storage space, and an external switch for the appliance VM.<br/> The appliance needs a static or dynamic IP address, and internet access.
| **Azure Migrate project**  |  An appliance can be associated with a single project.<br/> Any number of appliances can be associated with a single project.<br/> You can assess up to 35,000 VMs in a project.
| **Hyper-V hosts**          | An appliance can connect to up to 300 Hyper-V hosts.
| **Discovery**              | A single appliance can discover up to 5000 VMs.
| **Assessment group**       | You can add up to 35,000 machines in a single group.
| **Assessment**             | You can assess up to 35,000 VMs in a single assessment.



## Assessment-appliance URL access

To assess VMs, the Azure Migrate appliance needs internet connectivity.

- When you deploy the appliance, Azure Migrate does a connectivity check to the URLs summarized in the table below.
- If you're using a URL-based proxy, allow access to the URLs in the table, making sure that the proxy resolves any CNAME records received while looking up the URLs.
- If you have an intercepting proxy, you might need to import the server certificate from the proxy server to the appliance.


**URL** | **Details**  
--- | ---
*.portal.azure.com | Navigation to the Azure portal
*.windows.net <br/> *.msftauth.net <br/> *.msauth.net <br/> *.microsoft.com <br/> *.live.com  | Sign in to your Azure subscription
*.microsoftonline.com <br/> *.microsoftonline-p.com | Creation of Azure Active Directory applications for appliance to service communications.
management.azure.com | Creation of Azure Active Directory applications for appliance to service communications.
dc.services.visualstudio.com | Logging and monitoring
*.vault.azure.net | Manage secrets in Azure Key Vault when communicating between the appliance and service.
aka.ms/* | Allow access to aka links.
https://download.microsoft.com/download/* | Allows downloads from the Microsoft Download site.



## Assessment-port requirements

The following table summarizes port requirements for assessment.

**Device** | **Connection**
--- | ---
**Appliance** | Inbound connections on TCP port 3389 to allow remote desktop connections to the appliance.<br/> Inbound connections on port 44368 to remotely access the appliance management app using the URL: ``` https://<appliance-ip-or-name>:44368 ```<br/> Outbound connections on ports 443, 5671 and 5672 to send discovery and performance metadata to Azure Migrate.
**Hyper-V host/cluster** | Inbound connections on WinRM ports 5985 (HTTP) and 5986 (HTTPS) to pull configuration and performance metadata of the Hyper-V VMs using a Common Information Model (CIM) session.

## Migration-Limitations
You can select up to 10 VMs at once for replication. If you want to migrate more machines, then replicate in groups of 10.

## Migration-Hyper-V host requirements

| **Support**                | **Details**               
| :-------------------       | :------------------- |
| **Host deployment**       | The Hyper-V host can be standalone or deployed in a cluster. |
| **Permissions**           | You need administrator permissions on the Hyper-V host. |
| **Host operating system** | Windows Server 2019, Windows Server 2016, or Windows Server 2012 R2. |

## Migration-Hyper-V VM requirements

| **Support**                  | **Details**               
| :----------------------------- | :------------------- |
| **Operating system** | All [Windows](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros) operating systems that are supported by Azure. |
| **Permissions**           | You need administrator permissions on each Hyper-V VM you want to assess. |
| **Integration Services**       | [Hyper-V Integration Services](https://docs.microsoft.com/virtualization/hyper-v-on-windows/reference/integration-services) must be running on VMs that you assess, in order to capture operating system information. |
| **Required changes for Azure** | Some VMs might require changes so that they can run in Azure. Azure Migrate makes these changes automatically for the following operating systems:<br/> - Red Hat Enterprise Linux 6.5+, 7.0+<br/> - CentOS 6.5+, 7.0+</br> - SUSE Linux Enterprise Server 12 SP1+<br/> - Ubuntu 14.04LTS, 16.04LTS, 18.04LTS<br/> - Debian 7, 8<br/><br/> For other operating systems, you need to make adjustments manually before migration. The relevant articles contain instructions about how to do this. |
| **Linux boot**                 | If /boot is on a dedicated partition, it should reside on the OS disk, and not be spread across multiple disks.<br/> If /boot is part of the root (/) partition, then the ‘/’ partition should be on the OS disk, and not span other disks. |
| **UEFI boot**                  | The migrated VM in Azure will be automatically converted to a BIOS boot VM. The VM should be running Windows Server 2012 and later only. The OS disk should have up to five partitions or fewer and the size of OS disk should be less than 300 GB.
  |
| **Disk size**                  | 2 TB for the OS disk, 4 TB for data disks.
| **Disk number** | A maximum of 16 disks per VM.
| **Encrypted disks/volumes**    | Not supported for migration. |
| **RDM/passthrough disks**      | Not supported for migration. |
| **Shared disk** | VMs using shared disks aren't supported for migration.
| **NFS**                        | NFS volumes mounted as volumes on the VMs won't be replicated. |
| **ISCSI**                      | VMs with iSCSI targets aren't supported for migration.
| **Target disk**                | You can migrate to Azure VMs with managed disks only. |
| **IPv6** | Not supported.
| **NIC teaming** | Not supported.
| **Azure Site Recovery** | You can't replicate using Azure Migrate Server Migration if the VM is enabled for replication with Azure Site Recovery.





## Migration-Hyper-V host URL access

The following table summarizes URL access requirements for Hyper-V hosts.

**URL** | **Details**  
--- | ---
login.microsoftonline.com | Access control and identity management using Active Directory.
*.backup.windowsazure.com | Replication data transfer and coordination.
*.hypervrecoverymanager.windowsazure.com | Connect to Azure Migrate service URLs.
*.blob.core.windows.net | Upload data to storage accounts.
dc.services.visualstudio.com | Upload app logs used for internal monitoring.
time.windows.com | Verifies time synchronization between system and global time.

## Migration-port access

The following table summarizes port requirements on Hyper-V hosts and VMs for VM migration.

**Device** | **Connection**
--- | ---
Hyper-V hosts/VMs | Outbound connections on HTTPS port 443 to send VM replication data to Azure Migrate.




## Next steps

[Prepare for Hyper-V VM assessment](tutorial-prepare-hyper-v.md) for migration.
