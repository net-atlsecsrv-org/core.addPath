---
title: Azure Migrate support matrix for Hyper-V assessment and migration
description: Summarizes settings and limitations for Hyper-V assessment and migration using the Azure Migrate service.
author: rayne-wiselman
manager: carmonm
ms.service: azure-migrate
ms.topic: conceptual
ms.date: 06/02/2019
ms.author: raynew
---

# Support matrix for Hyper-V assessment and migration

You can use the [Azure Migrate service](migrate-overview.md) to assess and migrate machines to the Microsoft Azure cloud. This article summarizes support settings and limitations for assessing and migrating on-premises Hyper-V VMs.



## Hyper-V scenarios

The table summarizes supported scenarios for Hyper-V VMs.

**Deployment** | **Details*** 
--- | --- 
**Assess on-premises Hyper-V VMs** | [Set up](tutorial-prepare-hyper-v.md) your first assessment.<br/><br/> [Run](scale-hyper-v-assessment.md) a large-scale assessment.
**Migrate Hyper-V VMs to Azure** | [Try out](tutorial-migrate-hyper-v.md) migration to Azure.

    

## Azure Migrate projects

**Support** | **Details**
--- | ---
Azure permissions | You need Contributor or Owner permissions in the subscription to create an Azure Migrate project.
Hyper-V VMs | Assess up to 10,000 Hyper-V VMs in a single project.

A project can include both VMware VMs and Hyper-V VMs, up to the assessment limits.


## Assessment-Hyper-V host requirements

| **Support**                | **Details**               
| :-------------------       | :------------------- |
| **Host deployment**       | The Hyper-V host can be standalone or deployed in a cluster. |
| **Permissions**           | You need administrator permissions on the Hyper-V host. |
| **Host operating system** | Windows Server 2016 or Windows Server 2012 R2.<br/> You can't assess VMs located on Hyper-V hosts running Windows Server 2019. |
| **PowerShell Remoting**   | Must be enabled on each host. |
| **Hyper-V Replica**       | If you use Hyper-V Replica (or you have multiple VMs with the same VM identifiers), and discover both the original and replicated VMs using Azure Migrate, the assessment generated by Azure Migrate might not be accurate. |


## Assessment-Hyper-V VM requirements

| **Support**                  | **Details**               
| :----------------------------- | :------------------- |
| **Operating system** | All [Windows](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros) operating systems that are supported by Azure. |
| **Permissions**           | You need administrator permissions on each Hyper-V VM you want to assess. |
| **Integration Services**       | [Hyper-V Integration Services](https://docs.microsoft.com/virtualization/hyper-v-on-windows/reference/integration-services) must be running on VMs that you assess, in order to capture operating system information. |
| **Required changes for Azure** | Some VMs might require changes so that they can run in Azure. Azure Migrate makes these changes automatically for the following operating systems:<br/> - Red Hat Enterprise Linux 6.5+, 7.0+<br/> - CentOS 6.5+, 7.0+</br> - SUSE Linux Enterprise Server 12 SP1+<br/> - Ubuntu 14.04LTS, 16.04LTS, 18.04LTS<br/> - Debian 7,8<br/><br/> For other operating systems, you need to make adjustments manually before migration. The relevant articles contain instructions about how to do this. |
| **Linux boot**                 | If /boot is on a dedicated partition, it should reside on the OS disk, and not be spread across multiple disks.<br/> If /boot is part of the root (/) partition, then the ‘/’ partition should be on the OS disk, and not span other disks. |
| **UEFI boot**                  | VMs with UEFI boot aren't supported for migration. |
| **Encrypted disks/volumes**    | VMs with encrypted disks/volumes aren't supported for migration. |
| **RDM/passthrough disks**      | If VMs have RDM or passthrough disks, these disks won't be replicated to Azure. |
| **NFS**                        | NFS volumes mounted as volumes on the VMs won't be replicated. |
| **Target disk**                | Azure Migrate assessments recommend migration to Azure VMs with managed disks only. |


## Assessment-appliance requirements

For assessment, Azure Migrate runs a lightweight appliance to discover Hyper-V VMs, and send VM metadata and performance data to Azure Migrate. The appliance runs on a Hyper-V VM, and you set up using a compressed Hyper-V VHD that you download from the Azure portal. The following table summarizes the appliance requirements.

| **Support**                | **Details**               
| :-------------------       | :------------------- |
| **Azure Migrate project**  |  An appliance can be associated with a single project.<br/> You can discover up to 5000 Hyper-V VMs with a single appliance.
| **Hyper-V limitations**    |  You deploy the appliance as a Hyper-V VM.<br/> The appliance VM provided is Hyper-V VM version 5.0.<br/> The VM host must be running Windows Server 2012 R2 or later.<br/> It needs sufficient space to allocate 16 GB RAM, 4 virtual processors, and 1 external switch for the appliance VM.<br/> Appliance requires a static or dynamic IP address, and internet access.
| **Hyper-V appliance**      |  The appliance is set up as a Hyper-V VM.<br/> The VHD provided for download is Hyper-V VM version 5.0.
| **Host**                   | The VM host running the appliance VM must be running Windows Server 2012 R2 or later.<br/> It needs sufficient space to allocate 16 GB RAM, 4 virtual processors, and one external switch for the appliance VM.<br/> Appliance requires a static or dynamic IP address, and internet access. |
| **Migration support**      | To start replicating machines, The Migration Gateway service on the appliance must be 1.18.7141.12919 or later. Sign into the appliance web app to check the version. |

## Assessment-appliance URL access

To assess VMs, the Azure Migrate appliance needs internet connectivity.

- When you deploy the appliance, Azure Migrate does a connectivity check to the URLs summarized in the table below.
- If you're using a URL-based firewall.proxy, allow access to the URLs in the table, making sure that the proxy resolves any CNAME records received while looking up the URLs.
- If you have an intercepting proxy, you might need to import the server certificate from the proxy server to the appliance. 

    
**URL** | **Details**  
--- | --- 
*.portal.azure.com | Navigation to the Azure portal
*.windows.net | Sign in to your Azure subscription
*.microsoftonline.com | Creation of Azure Active Directory applications for appliance to service communications.
management.azure.com | Creation of Azure Active Directory applications for appliance to service communications.
dc.services.visualstudio.com | Logging and monitoring 
*.vault.azure.net | Manage secrets in Azure Key Vault when communicating between the appliance and service.


## Assessment-port requirements

The following table summarizes port requirements for assessment.

**Device** | **Connection**
--- | --- 
**Appliance** | Inbound connections on TCP port 3389 to allow remote desktop connections to the appliance.<br/> Inbound connections on port 44368 to remotely access the appliance management app using the URL: https://<appliance-ip-or-name>:44368<br/> Outbound connections on port 443 to send discovery and performance metadata to Azure Migrate.
**Hyper-V host/cluster** | Inbound connections on WinRM ports 5985 (HTTP) and 5986 (HTTPS) to pull configuration and performance metadata of the Hyper-V VMs using a Common Information Model (CIM) session.

## Migration-Hyper-V host requirements

| **Support**                | **Details**               
| :-------------------       | :------------------- |
| **Host deployment**       | The Hyper-V host can be standalone or deployed in a cluster. |
| **Permissions**           | You need administrator permissions on the Hyper-V host. |
| **Host operating system** | Windows Server 2019, Windows Server 2016, or Windows Server 2012 R2. |

## Migration-Hyper-V VM requirements

| **Support**                  | **Details**               
| :----------------------------- | :------------------- |
| **Operating system** | All [Windows](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros) operating systems that are supported by Azure. |
| **Permissions**           | You need administrator permissions on each Hyper-V VM you want to assess. |
| **Integration Services**       | [Hyper-V Integration Services](https://docs.microsoft.com/virtualization/hyper-v-on-windows/reference/integration-services) must be running on VMs that you assess, in order to capture operating system information. |
| **Required changes for Azure** | Some VMs might require changes so that they can run in Azure. Azure Migrate makes these changes automatically for the following operating systems:<br/> - Red Hat Enterprise Linux 6.5+, 7.0+<br/> - CentOS 6.5+, 7.0+</br> - SUSE Linux Enterprise Server 12 SP1+<br/> - Ubuntu 14.04LTS, 16.04LTS, 18.04LTS<br/> - Debian 7,8<br/><br/> For other operating systems, you need to make adjustments manually before migration. The relevant articles contain instructions about how to do this. |
| **Linux boot**                 | If /boot is on a dedicated partition, it should reside on the OS disk, and not be spread across multiple disks.<br/> If /boot is part of the root (/) partition, then the ‘/’ partition should be on the OS disk, and not span other disks. |
| **UEFI boot**                  | VMs with UEFI boot aren't supported for migration. |
| **Encrypted disks/volumes**    | VMs with encrypted disks/volumes aren't supported for migration. |
| **RDM/passthrough disks**      | If VMs have RDM or passthrough disks, these disks won't be replicated to Azure. |
| **NFS**                        | NFS volumes mounted as volumes on the VMs won't be replicated. |
| **Target disk**                | You can migrate to Azure VMs with managed disks only. |




## Migration-Hyper-V host URL access

The following table summarizes URL access requirements for Hyper-V hosts.

**URL** | **Details**  
--- | ---
login.microsoftonline.com | Access control and identity management using Active Directory.
*.backup.windowsazure.com | Replication data transfer and coordination.
*.hypervrecoverymanager.windowsazure.com | Connect to Azure Migrate service URLs.
*.blob.core.windows.net | Upload data to storage accounts.
dc.services.visualstudio.com | Upload app logs used for internal monitoring.
time.windows.com | Verifies time synchronization between system and global time.

## Migration-port access

The following table summarizes port requirements on Hyper-V hosts and VMs for VM migration.

**Device** | **Connection**
--- | --- 
Hyper-V hosts/VMs | Outbound connections on HTTPS port 443 to send VM replication data to Azure Migrate.

  
## Migration-VM disk support 

**Support** | **Details**
--- | ---
Migrated disks | VMs can only be migrated to managed disks (standard HHD, premium SSD) in Azure.
   

## Next steps

[Prepare for Hyper-V VM assessment](tutorial-prepare-hyper-v.md) for migration.




 
