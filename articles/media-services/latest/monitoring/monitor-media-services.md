---
title: Monitoring Media Services 
description: Start here to learn how to monitor Media Services 
author: IngridAtMicrosoft
ms.author: inhenkel
manager: femilia
ms.topic: how-to 
ms.service: media-services
ms.custom: subject-monitoring
ms.date: 03/17/2021
---

# Monitor Media Services

When you have critical applications and business processes relying on Azure resources, you want to monitor those resources for their availability, performance, and operation. This article describes the monitoring data generated by Media Services and how you can use the features of Azure Monitor to analyze and alert on this data.

## Metrics are useful

Here are examples of how monitoring Media Services metrics can help you understand how your apps are performing. Some questions that can be addressed with Media Services metrics are:

- How do I monitor my Standard Streaming Endpoint to know when I have exceeded the limits?
- How do I know if I have enough Premium Streaming Endpoint scale units?
- How can I set an alert to know when to scale up my Streaming Endpoints?
- How do I set an alert to know when the max egress configured on the account was reached?
- How can I see the breakdown of requests failing and what is causing the failure?
- How can I see how many HLS or DASH requests are being pulled from the packager?
- How do I set an alert to know when the I have hit the threshold value of failed requests?

<!--THIS DOESN'T BELONG HERE Concurrency becomes a concern for the number of Streaming Endpoints used in a single account over time. You need to keep in mind the relationship between the number of concurrent streams with complex publishing parameters like dynamic packaging to multiple protocols, multiple DRM encryptions etc. Each additional published live stream adds to the CPU and output bandwidth on the Streaming Endpoint. With that in mind, you should use Azure Monitor to closely watch the Streaming Endpoint's utilization (CPU and Egress capacity) to make certain that you are scaling it appropriately (or split traffic out between multiple Streaming Endpoints if you are getting into very high concurrency).-->

<!-- Optional diagram showing monitoring for your service. If you need help creating one, contact 
robb@microsoft.com -->

## What is Azure Monitor?

Media Services creates monitoring data using [Azure Monitor](../../../azure-monitor/overview.md), which is a full stack monitoring service in Azure that provides a complete set of features to monitor your Azure resources in addition to resources in other clouds and on-premises.

Start with reading the article [Monitoring Azure resources with Azure Monitor](../../../azure-monitor/essentials/monitor-azure-resource.md), which describes the following concepts:

- What is Azure Monitor?
- Costs associated with monitoring
- Monitoring data collected in Azure
- Configuring data collection
- Standard tools in Azure for analyzing and alerting on monitoring data

## Monitoring data

Media Services collects the same kinds of monitoring data as other Azure resources that are described in [Monitoring data from Azure resources](../../../azure-monitor/essentials/monitor-azure-resource.md#monitoring-data).

All data collected by Azure Monitor fits into one of two fundamental types: metrics and logs. With these two types you can:

- Visualize and analyze the metrics data using Metrics explorer.
- Monitor Media Services diagnostic logs and create alerts and notifications for them.
- With logs you can:
  - Send them to Azure Storage
  - Stream them to Azure Event Hubs
  - Export them to Log Analytics
  - Use third-party services

See the article [Monitoring Media Services data reference](monitor-media-services-data-reference.md) for detailed information on the metrics and logs metrics created by Media Services.

## Collection and routing

*Platform metrics* and the *Activity log* are collected and stored automatically, but can be routed to other locations by using a diagnostic setting.  

*Resource Logs* are **not** collected and stored until you create a diagnostic setting and route them to one or more locations.

See the article [Create diagnostic setting to collect platform logs and metrics in Azure](../../../azure-monitor/essentials/diagnostic-settings.md) for the detailed process of creating a diagnostic setting using the Azure portal, CLI, or PowerShell.

When you create a diagnostic setting, you specify which categories of logs to collect. The categories for Media Services are listed in [Media Services monitoring data reference](monitor-media-services-data-reference.md).

## Analyzing metrics

You can analyze metrics for Media Services with metrics from other Azure services using metrics explorer by opening **Metrics** from the **Azure Monitor** menu. See [Getting started with Azure Metrics Explorer](../../../azure-monitor/essentials/metrics-getting-started.md) for details on using this tool.

For a list of the metrics collected for Media Services, see [Monitoring Media Services Data Reference](monitor-media-services-data-reference.md).

## Analyzing logs

Data in Azure Monitor Logs is stored in tables where each table has its own set of unique properties.  

All resource logs in Azure Monitor have the same fields followed by service-specific fields. The common schema is outlined in [Azure Monitor resource log schema](../../../azure-monitor/essentials/resource-logs-schema.md#top-level-common-schema).

The schema for Media Services resource logs is found in [Monitoring Media Services Data Reference](monitor-media-services-data-reference.md).

The [Activity log](../../../azure-monitor/essentials/activity-log.md) is a platform log in Azure that provides insight into subscription-level events. You can view it independently or route it to Azure Monitor Logs, where you can do much more complex queries using Log Analytics.

For a list of the types of resource logs collected for Media Services, see [Monitoring Media Services data reference](monitor-media-services-data-reference.md).

### Why would I want to use diagnostic logs?

Some things that you can examine with diagnostic logs are:

- The number of licenses delivered by DRM type.
- The number of licenses delivered by policy.
- Errors by DRM or policy type.
- The number of unauthorized license requests from clients.

## Alerts

Azure Monitor alerts proactively notify you when important conditions are found in your monitoring data. They allow you to identify and address issues in your system before your customers notice them. You can set alerts on [metrics](../../../azure-monitor/alerts/alerts-metric-overview.md), [logs](../../../azure-monitor/alerts/alerts-unified-log.md), and the [activity log](../../../azure-monitor/alerts/activity-log-alerts.md).

Media Services metrics are collected at regular intervals whether or not the value changes. They're useful for alerting because they can be sampled frequently. An alert can be fired quickly with relatively simple logic.

<!--
The following table lists common and recommended alert rules for Media Services.

<!-- Fill in the table with metric and log alerts that would be valuable for your service. Change the format as necessary to make it more readable
**PLACEHOLDER** table

| Alert type | Condition | Description  |
|:---|:---|:---|
| | | |
| | | |
-->

## Next steps

[!INCLUDE [monitoring-next-steps](../includes/monitoring-next-steps.md)]
